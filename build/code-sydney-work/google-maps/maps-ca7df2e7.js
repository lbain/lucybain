$.fn.serializeObject=function(){var e={},n=this.serializeArray();return $.each(n,function(){e[this.name]!==undefined?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},function(){function e(){var r;this.init=function(e){var n={center:{lat:-34.397,lng:150.644},zoom:8};return r=new google.maps.Map(e,n),this},this.createMarker=function(e,n,t){var i=new google.maps.Marker({position:new google.maps.LatLng(e,n),map:r,title:t}),a=new google.maps.InfoWindow({content:t});return google.maps.event.addListener(i,"click",function(){a.open(r,i)}),i}}function t(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function i(e,n){return e.offset().top+n}function n(e,n){return t()-i(e,n)+"px"}var a=new e;$(function(){$mapDisplay=$("#map-canvas"),$mapDisplay.css("height",n($mapDisplay,5)),a.init($mapDisplay[0]),$("form").submit(function(e){e.preventDefault();var n=$(e.target).serializeObject();a.createMarker(n.lat,n.lng,n.message)})})}();