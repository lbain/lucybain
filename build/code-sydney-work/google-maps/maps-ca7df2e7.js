$.fn.serializeObject=function(){var e={},n=this.serializeArray();return $.each(n,function(){e[this.name]!==undefined?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},function(){function e(){var e;this.init=function(n){var t={center:{lat:-34.397,lng:150.644},zoom:8};return e=new google.maps.Map(n,t),this},this.createMarker=function(n,t,i){var a=new google.maps.Marker({position:new google.maps.LatLng(n,t),map:e,title:i}),r=new google.maps.InfoWindow({content:i});return google.maps.event.addListener(a,"click",function(){r.open(e,a)}),a}}function n(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function t(e,n){return e.offset().top+n}function i(e,i){return n()-t(e,i)+"px"}var a=new e;$(function(){$mapDisplay=$("#map-canvas"),$mapDisplay.css("height",i($mapDisplay,5)),a.init($mapDisplay[0]),$("form").submit(function(e){e.preventDefault();var n=$(e.target).serializeObject();a.createMarker(n.lat,n.lng,n.message)})})}();